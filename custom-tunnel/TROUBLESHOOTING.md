# λ¬Έμ  ν•΄κ²° κ°€μ΄λ“

## "Bad Gateway: socket hang up" μ¤λ¥

### μ›μΈ

μ΄ μ¤λ¥λ” ν΄λΌμ΄μ–ΈνΈκ°€ λ΅μ»¬ μ„λ²„λ΅ μ”μ²­μ„ μ „λ‹¬ν•  λ• μ—°κ²°μ΄ μκΈ°μΉ μ•κ² λμ–΄μ§€λ” κ²½μ° λ°μƒν•©λ‹λ‹¤.

### ν•΄κ²° λ°©λ²•

#### 1. μµκ·Ό μ—…λ°μ΄νΈ μ μ© (v1.1.0+)

λ‹¤μκ³Ό κ°™μ€ κ°μ„  μ‚¬ν•­μ΄ μ μ©λμ—μµλ‹λ‹¤:

**ν΄λΌμ΄μ–ΈνΈ κ°μ„ :**

- λ¶ν•„μ”ν• HTTP ν—¤λ” μ κ±° (host, connection, content-length, transfer-encoding)
- HTTP Agentμ keepAliveλ¥Ό falseλ΅ μ„¤μ •ν•μ—¬ μ—°κ²° μ¬μ‚¬μ© λ°©μ§€
- 25μ΄ νƒ€μ„μ•„μ›ƒ μ„¤μ • (μ„λ²„μ 30μ΄λ³΄λ‹¤ μ§§κ²)

**μ„λ²„ κ°μ„ :**

- μ”μ²­/μ‘λ‹µ μ—λ¬ ν•Έλ“¤λ§ κ°•ν™”
- ν΄λΌμ΄μ–ΈνΈ μ—°κ²° λκΉ€ κ°μ§€ λ° μ²λ¦¬
- νƒ€μ„μ•„μ›ƒ κ΄€λ¦¬ κ°μ„  (μ‘λ‹µ μ™„λ£ μ‹ μλ™ μ·¨μ†)
- μ¤‘λ³µ μ‘λ‹µ λ°©μ§€ (headersSent μ²΄ν¬)

#### 2. λ΅μ»¬ μ„λ²„ μƒνƒ ν™•μΈ

```bash
# λ΅μ»¬ μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
curl http://localhost:3000
```

λ΅μ»¬ μ„λ²„κ°€ μ‘λ‹µν•μ§€ μ•μΌλ©΄:

- μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
- ν¬νΈ λ²νΈκ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈ
- λ°©ν™”λ²½ μ„¤μ • ν™•μΈ

#### 3. ν„°λ„ μ¬μ‹μ‘

```bash
# ν΄λΌμ΄μ–ΈνΈ μΆ…λ£ (Ctrl+C)
# μ„λ²„ μΆ…λ£ (Ctrl+C)

# μ„λ²„ μ¬μ‹μ‘
cd custom-tunnel/server
npm start

# μƒ ν„°λ―Έλ„μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ¬μ‹μ‘
cd custom-tunnel/client
npm start 3000
```

#### 4. λ΅μ»¬ μ„λ²„ νƒ€μ„μ•„μ›ƒ μ„¤μ • ν™•μΈ

λ΅μ»¬ μ„λ²„μ νƒ€μ„μ•„μ›ƒμ΄ λ„λ¬΄ μ§§μΌλ©΄ ν„°λ„ νƒ€μ„μ•„μ›ƒ(25μ΄)λ³΄λ‹¤ λ¨Όμ € λμ–΄μ§ μ μμµλ‹λ‹¤.

Express μ„λ²„ μμ‹:

```javascript
const server = app.listen(3000);
server.timeout = 30000; // 30μ΄λ΅ μ„¤μ •
```

## κΈ°νƒ€ λ¬Έμ 

### "Tunnel not available" μ¤λ¥

**μ›μΈ:** ν„°λ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ§€ μ•μ•κ±°λ‚ μ—°κ²°μ΄ λμ–΄μ΅μµλ‹λ‹¤.

**ν•΄κ²° λ°©λ²•:**

1. ν„°λ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
2. WebSocket μ—°κ²° λ΅κ·Έ ν™•μΈ
3. ν΄λΌμ΄μ–ΈνΈλ¥Ό μ¬μ‹μ‘

### "Gateway Timeout" μ¤λ¥

**μ›μΈ:** μ”μ²­μ΄ 30μ΄ λ‚΄μ— μ²λ¦¬λμ§€ μ•μ•μµλ‹λ‹¤.

**ν•΄κ²° λ°©λ²•:**

1. λ΅μ»¬ μ„λ²„μ μ‘λ‹µ μ‹κ°„ ν™•μΈ
2. μ²λ¦¬ μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬λ” μ‘μ—…μ€ λΉ„λ™κΈ°λ΅ μ²λ¦¬
3. ν•„μ”μ‹ μ„λ²„μ νƒ€μ„μ•„μ›ƒ μ„¤μ • μ¦κ°€:

`custom-tunnel/server/index.js`:

```javascript
// ν„μ¬: 30000ms (30μ΄)
// ν•„μ”μ‹ μ¦κ°€
}, 60000); // 60μ΄
```

`custom-tunnel/client/index.js`:

```javascript
// ν΄λΌμ΄μ–ΈνΈ νƒ€μ„μ•„μ›ƒλ„ ν•¨κ» μ¦κ°€ (μ„λ²„λ³΄λ‹¤ μ§§κ²)
timeout: 55000, // 55μ΄
```

### μ—°κ²°μ΄ μμ£Ό λμ–΄μ§

**μ›μΈ:** λ„¤νΈμ›ν¬ λ¶μ•μ • λλ” λ΅μ»¬ μ„λ²„ λ¬Έμ 

**ν•΄κ²° λ°©λ²•:**

1. λ„¤νΈμ›ν¬ μ—°κ²° μƒνƒ ν™•μΈ
2. λ΅μ»¬ μ„λ²„ λ΅κ·Έ ν™•μΈ
3. ν΄λΌμ΄μ–ΈνΈ/μ„λ²„ μ¬μ‹μ‘
4. ν¬νΈ μ¶©λ ν™•μΈ:

```bash
# ν¬νΈ μ‚¬μ© ν™•μΈ (macOS/Linux)
lsof -i :8080
lsof -i :3000
```

### CSS/JS νμΌμ΄ λ΅λ“λμ§€ μ•μ

**μ›μΈ:** μΏ ν‚¤κ°€ μ—†μ–΄μ„ ν„°λ„ IDλ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.

**ν•΄κ²° λ°©λ²•:**

- μ΄λ―Έ μμ •λμ—μµλ‹λ‹¤ - μ„λ²„κ°€ μλ™μΌλ΅ μΏ ν‚¤λ¥Ό μ„¤μ •ν•©λ‹λ‹¤
- λΈλΌμ°μ €μ—μ„ μΏ ν‚¤κ°€ ν™μ„±ν™”λμ–΄ μλ”μ§€ ν™•μΈ
- μ‹ν¬λ¦Ώ λ¨λ“κ°€ μ•„λ‹μ§€ ν™•μΈ

## λ””λ²„κΉ… ν

### μƒμ„Έ λ΅κ·Έ ν™•μΈ

**μ„λ²„ λ΅κ·Έ:**

- β… μƒ ν„°λ„ μ—°κ²°
- π“¥ μ”μ²­ λ°›μ
- π“¨ ν„°λ„λ΅ μ „μ†΅
- π“¤ μ‘λ‹µ μ „μ†΅
- β μ¤λ¥ λ©”μ‹μ§€

**ν΄λΌμ΄μ–ΈνΈ λ΅κ·Έ:**

- β… ν„°λ„ μ„λ²„ μ—°κ²° μ„±κ³µ
- π‰ ν„°λ„ μƒμ„± μ™„λ£
- π“¥ μ”μ²­ λ°›μ
- π“¤ μ‘λ‹µ μ „μ†΅
- β μ¤λ¥ λ©”μ‹μ§€

### λ„¤νΈμ›ν¬ μ”μ²­ ν™•μΈ

λΈλΌμ°μ € κ°λ°μ λ„κµ¬ (F12):

1. Network νƒ­ μ—΄κΈ°
2. μ”μ²­/μ‘λ‹µ μƒνƒ ν™•μΈ
3. μ‘λ‹µ μ‹κ°„ ν™•μΈ
4. ν—¤λ” ν™•μΈ

### μ§μ ‘ ν…μ¤νΈ

```bash
# λ΅μ»¬ μ„λ²„ μ§μ ‘ ν…μ¤νΈ
curl http://localhost:3000

# ν„°λ„μ„ ν†µν• ν…μ¤νΈ
curl http://localhost:8080/{tunnel-id}/

# ν—¤λ” ν¬ν•¨ ν…μ¤νΈ
curl -v http://localhost:8080/{tunnel-id}/
```

## μ§€μ›

λ¬Έμ κ°€ κ³„μ†λλ©΄:

1. μ„λ²„/ν΄λΌμ΄μ–ΈνΈ λ΅κ·Έ ν™•μΈ
2. λΈλΌμ°μ € μ½μ†” λ΅κ·Έ ν™•μΈ
3. GitHub Issuesμ— λ¬Έμ  μ λ³΄
